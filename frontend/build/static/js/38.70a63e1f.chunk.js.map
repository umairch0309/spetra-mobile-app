{"version":3,"sources":["views/notifications/NotificationPage.js","components/common/Loading.js","redux/actions/dashboardActions.js","services/panel/index.js","components/notification/NotificationDiv.js"],"names":["AllNotificationsPage","user","useSelector","state","auth","userId","_id","role","dispatch","useDispatch","useEffect","setHeaderTitle","_useQuery","useQuery","getNotification","enabled","undefined","data","isLoading","notiData","_jsxs","className","children","_jsx","Loading","_Fragment","style","minHeight","borderRadius","length","map","item","NotificationDiv","_ref","_ref$height","height","width","LoadingComponent","title","type","SET_HEADER_TITLE","payload","getNewNotification","headers","API","get","markSeenAllNotification","delete","getDocProfile","getPatProfile","updateSlot","resData","physicalTimeSlot","slots","videoTimeSlot","put","getAppointments","count","queryKey","concat","getConsulations","_ref2","getChatToken","_ref3","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_context","prev","next","sent","abrupt","stop","apply","arguments","getPaymentHistory","_ref4","_item$booking","_item","_item$booking2","_item$booking2$bookin","src","alt","booking","visitType","name","formatDate","parseISO","bookingDate","start","onClick","handleJoinMeeting"],"mappings":"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","file":"static/js/38.70a63e1f.chunk.js","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useQuery } from \"react-query\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Loading from \"../../components/common/Loading\";\nimport NotificationDiv from \"../../components/notification/NotificationDiv\";\nimport { setHeaderTitle } from \"../../redux/actions/dashboardActions\";\nimport { getNotification } from \"../../services/panel\";\n\nexport default function AllNotificationsPage() {\n  // fetching user data\n  const { user } = useSelector((state) => state.auth);\n  const userId = user?._id;\n  const role = user?.role;\n\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(setHeaderTitle(\"Notification\"));\n    return () => {};\n  }, []);\n\n  const { data, isLoading } = useQuery(\n    [\"notification\", role],\n    getNotification,\n    {\n      enabled: role != undefined,\n    }\n  );\n\n  const notiData = data?.data;\n\n  //   main return\n  return (\n    <div className=\"contentRow\">\n      {isLoading && <Loading />}\n      {isLoading || (\n        <>\n          <div\n            className=\"bg-white p-2\"\n            style={{ minHeight: \"50vh\", borderRadius: \"2rem\" }}\n          >\n            {notiData?.length <= 0 ? (\n              <div className=\"textColor2 text-center mt-5\">\n                No new notifications to note\n              </div>\n            ) : (\n              notiData?.map((item) => {\n                return (\n                  <div className=\"mb-3\">\n                    <NotificationDiv\n                      item={item}\n                      userId={userId}\n                      key={item._id}\n                      role={role}\n                    />\n                  </div>\n                );\n              })\n            )}\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n","import React from \"react\";\nimport LoadingComponent from \"@material-ui/core/CircularProgress\";\nexport default function Loading({ height = \"80vh\" }) {\n  return (\n    <div className=\"centerFlex\" style={{ height: height, width: \"100%\" }}>\n      <LoadingComponent />\n    </div>\n  );\n}\n","import { SET_HEADER_TITLE } from \"../constants/dashboardConstant\";\n\nexport const setHeaderTitle = (title) => {\n  return {\n    type: SET_HEADER_TITLE,\n    payload: title,\n  };\n};\n","import API from \"../../config/AxiosBase\";\nimport { headers } from \"../../helpers/helpers\";\n\n// notification\nexport const getNewNotification = () => {\n  headers();\n  return API.get(`/notification/?seen=true`);\n};\nexport const getNotification = () => {\n  headers();\n  return API.get(`/notification/`);\n};\nexport const markSeenAllNotification = () => {\n  headers();\n  return API.delete(`/notification/`);\n};\n// dashboard counts\nexport const getDashboardCounts = () => {\n  headers();\n  return API.get(`/auth/dashboard-counts`);\n};\n\n// profile\nexport const getDocProfile = () => {\n  headers();\n  return API.get(`/docprofile`);\n};\nexport const getPatProfile = () => {\n  headers();\n  return API.get(`/patprofile`);\n};\nexport const updateSlot = (data) => {\n  let resData =\n    data?.type === \"physical\"\n      ? { physicalTimeSlot: data.slots }\n      : { videoTimeSlot: data.slots };\n\n  headers();\n  return API.put(`/docprofile/update-event`, resData);\n};\n\n// Appointments\nexport const getAppointments = ({ queryKey }) => {\n  const count = queryKey[1];\n  headers();\n  return API.get(`/booking/?visitType=physical&&count=${count}`);\n};\n// consulation\nexport const getConsulations = ({ queryKey }) => {\n  const count = queryKey[1];\n  headers();\n  return API.get(`/booking/?visitType=video&&count=${count}`);\n};\n\n// chat\nexport const getChatToken = async () => {\n  headers();\n  const response = await API.get(\"/chat/token\");\n  const { data } = response;\n  return data;\n};\n\n// payment history\nexport const getPaymentHistory = ({ queryKey }) => {\n  const count = queryKey[1];\n  headers();\n  return API.get(`/patprofile/get-payments?count=${count}`);\n};\n","import { format as formatDate, parseISO } from \"date-fns\";\nimport { handleJoinMeeting } from \"../../helpers/helpers\";\n\nconst NotificationDiv = ({ item, userId, role }) => {\n  return (\n    <div className=\"flexBetweenCenter notificationDiv\">\n      <div className=\"flexCenter\">\n        <img src=\"/images/notiBell.png\" className=\"img\" alt=\"noti\"></img>\n        <div className=\"d-flex\">\n          <div className=\"title\">\n            {`${\n              item?.booking?.visitType === \"video\"\n                ? \"Consulation\"\n                : \"Appointment\"\n            } with ${\n              item[role === \"patient\" ? \"doctorData\" : \"patientData\"]?.name\n            } at ${formatDate(\n              parseISO(item?.booking?.bookingDate?.start),\n              \"Pp\"\n            )} `}\n          </div>\n        </div>\n      </div>\n      <button\n        onClick={() => handleJoinMeeting(item.booking, userId)}\n        className=\"btn btn-outline-primary btn-sm\"\n      >\n        join\n      </button>\n    </div>\n  );\n};\n\nexport default NotificationDiv;\n"],"sourceRoot":""}